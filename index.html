<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Sweet Treats Store</title>
<style>
/* RESET AND BASE STYLES */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Arial', sans-serif;
  background-color: #f2f2f2;
  line-height: 1.6;
}

/* NAVIGATION BAR STYLES */
.navbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #ff6f61;
  padding: 10px 20px;
  position: relative;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
  z-index: 1000;
}

.logo-section {
  display: flex;
  align-items: center;
}

.logo-section img {
  height: 50px;
  width: 50px;
}

.store-name {
  font-size: 1.8em;
  color: white;
  margin-left: 10px;
  font-weight: bold;
}

.nav-buttons {
  display: flex;
  align-items: center;
}

.nav-buttons a {
  text-decoration: none;
  color: white;
  padding: 8px 12px;
  margin: 0 5px;
  font-weight: bold;
  border-radius: 4px;
  transition: background 0.3s;
}

.nav-buttons a:hover {
  background-color: rgba(255,255,255,0.2);
}

/* CART AND NOTIFICATION */
.cart-container {
  position: relative;
  margin-left: 15px;
}

#cart-btn {
  position: relative;
  background: none;
  border: none;
  color: white;
  font-size: 1.5em;
  cursor: pointer;
  padding: 5px 10px;
  display: flex;
  align-items: center;
}

#cart-count {
  background-color: #fff;
  color: #ff6f61;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 0.8em;
  position: absolute;
  top: -8px;
  right: -8px;
  font-weight: bold;
  min-width: 20px;
  text-align: center;
}

#notification {
  position: absolute;
  top: 50px;
  right: 0;
  background-color: #4BB543;
  color: white;
  padding: 10px 20px;
  border-radius: 5px;
  opacity: 0;
  transition: opacity 0.5s, transform 0.5s;
  transform: translateY(-10px);
  z-index: 1001;
  font-weight: bold;
}

#notification.show {
  opacity: 1;
  transform: translateY(0);
}

/* MAIN CONTENT AREA */
#content {
  padding: 20px;
}

/* FOOTER AND CONTACT DETAILS */
footer {
  background-color: #333;
  color: #eee;
  padding: 20px;
  text-align: center;
  margin-top: 40px;
}

/* BUTTONS AND FORMS */
button {
  background-color: #ff6f61;
  color: white;
  border: none;
  padding: 10px 15px;
  margin-top: 10px;
  border-radius: 4px;
  cursor: pointer;
  font-weight: bold;
  transition: background 0.3s;
}

button:hover {
  background-color: #e65b50;
}

/* PRODUCT CARDS */
.product-card {
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  margin: 10px;
  width: 200px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 10px;
  transition: transform 0.3s;
}

.product-card:hover {
  transform: scale(1.05);
}

.product-image {
  width: 100%;
  height: 150px;
  object-fit: cover;
  border-radius: 4px;
}

.product-name {
  font-weight: bold;
  margin: 10px 0 5px 0;
}

.product-price {
  color: #555;
  margin-bottom: 10px;
}

.products-container {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
}

/* REVIEWS */
.review-container {
  margin-top: 20px;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
  background: #fff;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.review-title {
  font-size: 1.4em;
  margin-bottom: 10px;
  text-align: center;
}
.star-rating {
  font-size: 1.5em;
  cursor: pointer;
  display: flex;
  justify-content: center;
}
.star {
  color: #ccc;
  margin: 0 5px;
  transition: color 0.3s;
}
.star.filled {
  color: gold;
}
.review-input {
  width: 100%;
  margin-top: 10px;
  display: flex;
  flex-direction: column;
}
.review-input textarea {
  resize: vertical;
  min-height: 80px;
  padding: 8px;
  border-radius: 4px;
  border: 1px solid #ccc;
}
.review-submit {
  margin-top: 10px;
  align-self: center;
}

/* Map container */
#map {
  width: 100%;
  height: 400px;
  margin-top: 20px;
  border-radius: 8px;
  overflow: hidden;
}

/* Contact details style */
.contact-details {
  margin-top: 20px;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-around;
}
.contact-item {
  background: #fff;
  padding: 15px;
  border-radius: 8px;
  width: 250px;
  margin: 10px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.contact-item h3 {
  margin-bottom: 10px;
  color: #ff6f61;
}
@media(max-width: 1000px) {
  .products-container {
    flex-direction: column;
    align-items: center;
  }
  .contact-details {
    flex-direction: column;
    align-items: center;
  }
}
</style>
</head>
<body>

<!-- Navigation Bar -->
<header class="navbar">
  <div class="logo-section">
    <img src="https://via.placeholder.com/50" alt="Logo" />
    <span class="store-name">Sweet Treats</span>
  </div>
  <div class="nav-buttons">
    <a href="#" data-page="home">Home</a>
    <a href="#" data-page="lollies">Lollies</a>
    <a href="#" data-page="chocolates">Chocolates</a>
    <a href="#" data-page="drinks">Drinks</a>
    <div class="cart-container">
      <button id="cart-btn" aria-label="Cart">ðŸ›’ <span id="cart-count">0</span></button>
      <div id="notification"></div>
    </div>
  </div>
</header>

<!-- Main content area -->
<div id="content"></div>

<!-- Footer with contact info -->
<footer>
  <div class="contact-details">
    <div class="contact-item">
      <h3>Contact Us</h3>
      <p>Phone: +123 456 7890</p>
      <p>Email: contact@sweettreats.com</p>
      <p>Address: 123 Candy Lane, Sweet City</p>
    </div>
  </div>
</footer>

<!-- Load Google Maps API -->
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY"></script>

<script>
// JavaScript code embedded in the same file for complexity and all-in-one functionality

// ---- GLOBAL VARIABLES AND STATE ----
const pages = ['home', 'lollies', 'chocolates', 'drinks', 'cart', 'contact'];
let currentPage = 'home';

// Cart data
let cart = [];
const maxCartItems = 99; // limit for cart items

// Reviews data stored locally
let reviews = JSON.parse(localStorage.getItem('reviews')) || [];

// Map variable
let map;

// ---- UTILITY FUNCTIONS ----

function showNotification(message) {
  const notif = document.getElementById('notification');
  notif.innerText = message;
  notif.className = 'show';
  setTimeout(() => {
    notif.className = '';
  }, 2000);
}

function saveCart() {
  localStorage.setItem('cart', JSON.stringify(cart));
}

function loadCart() {
  const stored = localStorage.getItem('cart');
  if (stored) {
    cart = JSON.parse(stored);
  }
}

function updateCartDisplay() {
  document.getElementById('cart-count').innerText = cart.reduce((sum, item) => sum + item.quantity, 0);
}

// ---- PAGE RENDERING FUNCTIONS ----

function renderPage(page) {
  currentPage = page;
  const contentDiv = document.getElementById('content');
  contentDiv.innerHTML = ''; // clear previous content

  if (page === 'home') {
    renderHomePage(contentDiv);
  } else if (page === 'lollies') {
    renderProductsPage('Lollies', generateSampleProducts('Lolly'), contentDiv);
  } else if (page === 'chocolates') {
    renderProductsPage('Chocolates', generateSampleProducts('Chocolate'), contentDiv);
  } else if (page === 'drinks') {
    renderProductsPage('Drinks', generateSampleProducts('Drink'), contentDiv);
  } else if (page === 'cart') {
    renderCartPage(contentDiv);
  } else if (page === 'contact') {
    renderContactPage(contentDiv);
  }
}

// Generate sample products
function generateSampleProducts(type) {
  const products = [];
  for (let i=1; i<=8; i++) {
    products.push({
      id: `${type.toLowerCase()}_${i}`,
      name: `${type} ${i}`,
      price: (Math.random() * 5 + 1).toFixed(2),
      image: 'https://via.placeholder.com/200x150?text=' + encodeURIComponent(`${type} ${i}`)
    });
  }
  return products;
}

// ---- PAGE RENDERERS ----

function renderHomePage(container) {
  // Welcome text
  const welcome = document.createElement('h2');
  welcome.innerText = 'Welcome to Sweet Treats!';
  welcome.style.textAlign = 'center';
  container.appendChild(welcome);

  // Products showcase
  const categories = ['Lollies', 'Chocolates', 'Drinks'];
  categories.forEach(cat => {
    const heading = document.createElement('h3');
    heading.innerText = cat;
    heading.style.marginTop = '20px';
    container.appendChild(heading);

    const products = generateSampleProducts(cat);
    const prodContainer = document.createElement('div');
    prodContainer.className = 'products-container';

    products.forEach(p => {
      const card = document.createElement('div');
      card.className = 'product-card';

      const img = document.createElement('img');
      img.src = p.image;
      img.className = 'product-image';

      const name = document.createElement('div');
      name.className = 'product-name';
      name.innerText = p.name;

      const price = document.createElement('div');
      price.className = 'product-price';
      price.innerText = `$${p.price}`;

      const addBtn = document.createElement('button');
      addBtn.innerText = 'Add to Cart';
      addBtn.onclick = () => {
        addToCart({id: p.id, name: p.name, price: parseFloat(p.price), quantity:1});
      };

      card.appendChild(img);
      card.appendChild(name);
      card.appendChild(price);
      card.appendChild(addBtn);

      prodContainer.appendChild(card);
    });

    container.appendChild(prodContainer);
  });

  // Google Map
  const mapHeading = document.createElement('h3');
  mapHeading.innerText = 'Our Location';
  mapHeading.style.marginTop = '30px';
  container.appendChild(mapHeading);

  const mapDiv = document.createElement('div');
  mapDiv.id = 'map';
  container.appendChild(mapDiv);

  // Initialize Google Map
  setTimeout(initMap, 100);
  
  // Contact details
  const contactDetailsHead = document.createElement('h3');
  contactDetailsHead.innerText = 'Contact Details';
  contactDetailsHead.style.marginTop = '30px';
  container.appendChild(contactDetailsHead);
  
  const detailsDiv = document.createElement('div');
  detailsDiv.className = 'contact-details';

  const detail1 = document.createElement('div');
  detail1.className = 'contact-item';
  detail1.innerHTML = `
    <h4>Phone</h4>
    <p>+123 456 7890</p>
  `;

  const detail2 = document.createElement('div');
  detail2.className = 'contact-item';
  detail2.innerHTML = `
    <h4>Email</h4>
    <p>contact@sweettreats.com</p>
  `;

  const detail3 = document.createElement('div');
  detail3.className = 'contact-item';
  detail3.innerHTML = `
    <h4>Address</h4>
    <p>123 Candy Lane, Sweet City</p>
  `;

  detailsDiv.appendChild(detail1);
  detailsDiv.appendChild(detail2);
  detailsDiv.appendChild(detail3);
  container.appendChild(detailsDiv);
}

function renderProductsPage(title, products, container) {
  const heading = document.createElement('h2');
  heading.innerText = title;
  container.appendChild(heading);

  const productsDiv = document.createElement('div');
  productsDiv.className = 'products-container';

  products.forEach(p => {
    const card = document.createElement('div');
    card.className = 'product-card';

    const img = document.createElement('img');
    img.src = p.image;
    img.className = 'product-image';

    const name = document.createElement('div');
    name.className = 'product-name';
    name.innerText = p.name;

    const price = document.createElement('div');
    price.className = 'product-price';
    price.innerText = `$${p.price}`;

    const addBtn = document.createElement('button');
    addBtn.innerText = 'Add to Cart';
    addBtn.onclick = () => {
      addToCart({id: p.id, name: p.name, price: parseFloat(p.price), quantity:1});
    };

    card.appendChild(img);
    card.appendChild(name);
    card.appendChild(price);
    card.appendChild(addBtn);
    productsDiv.appendChild(card);
  });

  container.appendChild(productsDiv);
}

function renderCartPage(container) {
  const title = document.createElement('h2');
  title.innerText = 'Your Cart';
  container.appendChild(title);

  if (cart.length === 0) {
    const emptyMsg = document.createElement('p');
    emptyMsg.innerText = 'Your cart is empty.';
    container.appendChild(emptyMsg);
    return;
  }

  const table = document.createElement('table');
  table.style.width = '100%';
  table.style.borderCollapse = 'collapse';

  const headerRow = document.createElement('tr');
  ['Item', 'Price', 'Quantity', 'Total', 'Remove'].forEach(text => {
    const th = document.createElement('th');
    th.innerText = text;
    th.style.border = '1px solid #ddd';
    th.style.padding = '8px';
    headerRow.appendChild(th);
  });
  table.appendChild(headerRow);

  let totalPrice = 0;

  cart.forEach((item, index) => {
    const row = document.createElement('tr');

    // Item name
    const nameTd = document.createElement('td');
    nameTd.innerText = item.name;
    nameTd.style.border = '1px solid #ddd';
    nameTd.style.padding = '8px';

    // Price
    const priceTd = document.createElement('td');
    priceTd.innerText = `$${item.price.toFixed(2)}`;
    priceTd.style.border = '1px solid #ddd';
    priceTd.style.padding = '8px';

    // Quantity
    const qtyTd = document.createElement('td');
    const qtyInput = document.createElement('input');
    qtyInput.type = 'number';
    qtyInput.min = 1;
    qtyInput.max = maxCartItems;
    qtyInput.value = item.quantity;
    qtyInput.style.width = '60px';
    qtyInput.onchange = () => {
      const newQty = parseInt(qtyInput.value);
      if (isNaN(newQty) || newQty <1) {
        qtyInput.value = item.quantity;
        return;
      }
      item.quantity = newQty;
      saveCart();
      updateCartDisplay();
      renderPage('cart');
    };
    qtyTd.appendChild(qtyInput);
    qtyTd.style.border = '1px solid #ddd';
    qtyTd.style.padding = '8px';

    // Total
    const totalTd = document.createElement('td');
    const itemTotal = item.price * item.quantity;
    totalTd.innerText = `$${itemTotal.toFixed(2)}`;
    totalTd.style.border = '1px solid #ddd';
    totalTd.style.padding = '8px';

    totalPrice += itemTotal;

    // Remove button
    const removeTd = document.createElement('td');
    const remBtn = document.createElement('button');
    remBtn.innerText = 'Remove';
    remBtn.onclick = () => {
      cart.splice(index,1);
      saveCart();
      updateCartDisplay();
      renderPage('cart');
    };
    removeTd.appendChild(remBtn);
    removeTd.style.border = '1px solid #ddd';
    removeTd.style.padding = '8px';

    row.appendChild(nameTd);
    row.appendChild(priceTd);
    row.appendChild(qtyTd);
    row.appendChild(totalTd);
    row.appendChild(removeTd);

    table.appendChild(row);
  });

  // Total sum row
  const sumRow = document.createElement('tr');
  const sumTd = document.createElement('td');
  sumTd.colSpan = 3;
  sumTd.innerText = 'Total';
  sumTd.style.border = '1px solid #ddd';
  sumTd.style.padding = '8px';
  sumTd.style.fontWeight = 'bold';

  const totalSumTd = document.createElement('td');
  totalSumTd.innerText = `$${totalPrice.toFixed(2)}`;
  totalSumTd.style.border = '1px solid #ddd';
  totalSumTd.style.padding = '8px';

  const emptyTd = document.createElement('td');
  emptyTd.innerHTML = '';

  sumRow.appendChild(sumTd);
  sumRow.appendChild(totalSumTd);
  sumRow.appendChild(emptyTd);
  table.appendChild(sumRow);

  container.appendChild(table);

  // Checkout button
  const checkoutBtn = document.createElement('button');
  checkoutBtn.innerText = 'Checkout';
  checkoutBtn.onclick = () => {
    alert('Thank you for your purchase!');
    cart = [];
    saveCart();
    updateCartDisplay();
    renderPage('home');
  };
  container.appendChild(checkoutBtn);
}

function renderContactPage(container) {
  const title = document.createElement('h2');
  title.innerText = 'Contact Us';
  container.appendChild(title);

  // Contact Form
  const form = document.createElement('form');
  form.id = 'contact-form';

  const nameLabel = document.createElement('label');
  nameLabel.innerText = 'Name: ';
  const nameInput = document.createElement('input');
  nameInput.type = 'text';
  nameInput.required = true;
  nameInput.style.width = '100%';

  const emailLabel = document.createElement('label');
  emailLabel.innerText = 'Email: ';
  const emailInput = document.createElement('input');
  emailInput.type = 'email';
  emailInput.required = true;
  emailInput.style.width = '100%';

  const messageLabel = document.createElement('label');
  messageLabel.innerText = 'Message: ';
  const messageTextarea = document.createElement('textarea');
  messageTextarea.required = true;
  messageTextarea.style.width = '100%';

  const submitBtn = document.createElement('button');
  submitBtn.type = 'submit';
  submitBtn.innerText = 'Send Message';

  form.appendChild(nameLabel);
  form.appendChild(nameInput);
  form.appendChild(document.createElement('br'));
  form.appendChild(emailLabel);
  form.appendChild(emailInput);
  form.appendChild(document.createElement('br'));
  form.appendChild(messageLabel);
  form.appendChild(messageTextarea);
  form.appendChild(document.createElement('br'));
  form.appendChild(submitBtn);

  form.onsubmit = (e) => {
    e.preventDefault();
    alert('Message sent! We will get back to you.');
    form.reset();
  };

  container.appendChild(form);

  // Review Section
  const reviewSection = document.createElement('div');
  reviewSection.className = 'review-container';

  const reviewTitle = document.createElement('div');
  reviewTitle.className = 'review-title';
  reviewTitle.innerText = 'Leave a Review';

  const starRatingDiv = document.createElement('div');
  starRatingDiv.className = 'star-rating';

  const stars = [];
  for (let i=1; i<=5; i++) {
    const starSpan = document.createElement('span');
    starSpan.className = 'star';
    starSpan.innerHTML = '&#9733;';
    starSpan.dataset.value = i;
    starSpan.onclick = () => {
      setStarRating(i);
    };
    stars.push(starSpan);
    starRatingDiv.appendChild(starSpan);
  }

  let selectedStars = 0;

  function setStarRating(rating) {
    selectedStars = rating;
    stars.forEach((s, index) => {
      s.className = 'star' + (index < rating ? ' filled' : '');
    });
  }

  // Review text area
  const reviewInputDiv = document.createElement('div');
  reviewInputDiv.className = 'review-input';

  const reviewTextArea = document.createElement('textarea');
  reviewTextArea.placeholder = 'Write your review here...';

  reviewInputDiv.appendChild(reviewTextArea);

  // Submit review button
  const reviewSubmitBtn = document.createElement('button');
  reviewSubmitBtn.className = 'review-submit';
  reviewSubmitBtn.innerText = 'Submit Review';

  reviewSubmitBtn.onclick = () => {
    if (selectedStars === 0 || reviewTextArea.value.trim() === '') {
      alert('Please select stars and write a review.');
      return;
    }
    // Save review
    reviews.push({
      stars: selectedStars,
      text: reviewTextArea.value.trim(),
      date: new Date().toISOString()
    });
    localStorage.setItem('reviews', JSON.stringify(reviews));
    alert('Thank you for your review!');
    // Reset
    setStarRating(0);
    reviewTextArea.value = '';
    renderReviews(container); 
  };

  // Append everything
  reviewSection.appendChild(reviewTitle);
  reviewSection.appendChild(starRatingDiv);
  reviewSection.appendChild(reviewInputDiv);
  reviewSection.appendChild(reviewSubmitBtn);

  container.appendChild(reviewSection);

  // Display existing reviews
  renderReviews(container);
}

function renderReviews(container) {
  // Remove old reviews if any
  const existingReviewsDiv = document.getElementById('reviews-list');
  if (existingReviewsDiv) {
    existingReviewsDiv.remove();
  }

  const reviewsDiv = document.createElement('div');
  reviewsDiv.id = 'reviews-list';
  reviewsDiv.style.marginTop = '20px';

  if (reviews.length === 0) {
    reviewsDiv.innerText = 'No reviews yet.';
  } else {
    reviews.forEach(r => {
      const reviewDiv = document.createElement('div');
      reviewDiv.style.borderBottom = '1px solid #ccc';
      reviewDiv.style.padding = '10px 0';

      const starsSpan = document.createElement('span');
      starsSpan.innerHTML = '&#9733;'.repeat(r.stars) + '&#9734;'.repeat(5 - r.stars);
      starsSpan.style.color = 'gold';

      const dateSpan = document.createElement('span');
      dateSpan.innerText = new Date(r.date).toLocaleString();
      dateSpan.style.fontSize = '0.8em';
      dateSpan.style.marginLeft = '10px';

      const textP = document.createElement('p');
      textP.innerText = r.text;
      textP.style.marginTop = '5px';

      reviewDiv.appendChild(starsSpan);
      reviewDiv.appendChild(dateSpan);
      reviewDiv.appendChild(document.createElement('br'));
      reviewDiv.appendChild(textP);

      reviewsDiv.appendChild(reviewDiv);
    });
  }

  container.appendChild(reviewsDiv);
}

// ---- ADD TO CART FUNCTION ----

function addToCart(item) {
  const existing = cart.find(i => i.id === item.id);
  if (existing) {
    existing.quantity += 1;
  } else {
    if (cart.reduce((sum, i) => sum + i.quantity, 0) >= maxCartItems) {
      alert('Cart limit reached!');
      return;
    }
    item.quantity = 1;
    cart.push(item);
  }
  saveCart();
  updateCartDisplay();
  showNotification('Item added to cart!');
}

// ---- INITIALIZATION ----

function init() {
  loadCart();
  updateCartDisplay();
  setupNavigation();
  renderPage('home');
  // Load reviews from local storage
  reviews = JSON.parse(localStorage.getItem('reviews')) || [];
}

// Navigation setup
function setupNavigation() {
  document.querySelectorAll('.nav-buttons a').forEach(link => {
    link.onclick = (e) => {
      e.preventDefault();
      const page = e.target.dataset.page;
      if (pages.includes(page)) {
        renderPage(page);
      }
    };
  });

  // Cart button
  document.getElementById('cart-btn').onclick = () => {
    renderPage('cart');
  };
}

// Google Map initialization
function initMap() {
  const location = { lat: 40.7128, lng: -74.0060 }; // Example: New York
  map = new google.maps.Map(document.getElementById('map'), {
    zoom: 12,
    center: location
  });
  new google.maps.Marker({ position: location, map: map });
}

// Run init after DOM loaded
document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
